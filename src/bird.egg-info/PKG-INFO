Metadata-Version: 2.4
Name: bird
Version: 0.6.0
Summary: CLI tool for tweeting and replying via Twitter/X GraphQL API
Author: Peter Steinberger
License: MIT License
        
        Copyright (c) 2025 Peter Steinberger
        
        Permission is hereby granted, free of charge, to any person obtaining a copy
        of this software and associated documentation files (the "Software"), to deal
        in the Software without restriction, including without limitation the rights
        to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
        copies of the Software, and to permit persons to whom the Software is
        furnished to do so, subject to the following conditions:
        
        The above copyright notice and this permission notice shall be included in all
        copies or substantial portions of the Software.
        
        THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
        IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
        FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
        AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
        LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
        OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
        SOFTWARE.
        
Project-URL: Homepage, https://github.com/steipete/bird
Project-URL: Changelog, https://github.com/steipete/bird/blob/main/CHANGELOG.md
Requires-Python: >=3.11
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: browser-cookie3>=0.20.1
Requires-Dist: httpx>=0.27.0
Requires-Dist: json5>=0.9.25
Requires-Dist: platformdirs>=4.2.2
Requires-Dist: typer>=0.12.3
Provides-Extra: dev
Requires-Dist: mypy>=1.10.0; extra == "dev"
Requires-Dist: pytest>=8.2.0; extra == "dev"
Requires-Dist: pytest-cov>=5.0.0; extra == "dev"
Requires-Dist: ruff>=0.5.0; extra == "dev"
Dynamic: license-file

# bird üê¶ ‚Äî fast X CLI for tweeting, replying, and reading

`bird` is a fast X CLI for tweeting, replying, and reading via X/Twitter GraphQL (cookie auth).

## Disclaimer

This project uses X/Twitter‚Äôs **undocumented** web GraphQL API (and cookie auth). X can change endpoints, query IDs,
and anti-bot behavior at any time ‚Äî **expect this to break without notice**.

## Install

With `uv`:

```bash
uv tool install bird
```

From source:

```bash
uv sync --dev
uv run bird whoami
```

## Quickstart

```bash
# Show the logged-in account
bird whoami

# Discover command help
bird help whoami

# Read a tweet (URL or ID)
bird read https://x.com/user/status/1234567890123456789
bird 1234567890123456789 --json

# Thread + replies
bird thread https://x.com/user/status/1234567890123456789
bird replies 1234567890123456789

# Search + mentions
bird search "from:steipete" -n 5
bird mentions -n 5
bird mentions --user @steipete -n 5

# Bookmarks
bird bookmarks -n 5
bird bookmarks --folder-id 123456789123456789 -n 5 # https://x.com/i/bookmarks/<folder-id>
bird bookmarks --all --json
bird bookmarks --all --max-pages 2 --json
bird unbookmark 1234567890123456789
bird unbookmark https://x.com/user/status/1234567890123456789

# Likes
bird likes -n 5

# Lists
bird list-timeline 1234567890 -n 20
bird list-timeline https://x.com/i/lists/1234567890 --all --json
bird list-timeline 1234567890 --max-pages 3 --json

# Following (who you follow)
bird following -n 20
bird following --user 12345678 -n 10  # by user ID

# Followers (who follows you)
bird followers -n 20
bird followers --user 12345678 -n 10  # by user ID

# Refresh GraphQL query IDs cache (no rebuild)
bird query-ids --fresh
```

## Library

`bird` can be used as a library (same GraphQL client as the CLI):

```python
from bird import TwitterClient, resolve_credentials

creds = resolve_credentials(cookie_source=["safari"])
client = TwitterClient({"cookies": creds["cookies"]})
result = client.search("from:steipete", 50)
```

## Commands

- `bird tweet "<text>"` ‚Äî post a new tweet.
- `bird reply <tweet-id-or-url> "<text>"` ‚Äî reply to a tweet using its ID or URL.
- `bird help [command]` ‚Äî show help (or help for a subcommand).
- `bird query-ids [--fresh] [--json]` ‚Äî inspect or refresh cached GraphQL query IDs.
- `bird read <tweet-id-or-url> [--json]` ‚Äî fetch tweet content as text or JSON.
- `bird <tweet-id-or-url> [--json]` ‚Äî shorthand for `read` when only a URL or ID is provided.
- `bird replies <tweet-id-or-url> [--json]` ‚Äî list replies to a tweet.
- `bird thread <tweet-id-or-url> [--json]` ‚Äî show the full conversation thread.
- `bird search "<query>" [-n count] [--json]` ‚Äî search for tweets matching a query.
- `bird mentions [-n count] [--user @handle] [--json]` ‚Äî find tweets mentioning a user (defaults to the authenticated user).
- `bird bookmarks [-n count] [--folder-id id] [--all] [--max-pages n] [--json]` ‚Äî list your bookmarked tweets (or a specific bookmark folder); `--max-pages` requires `--all`.
- `bird unbookmark <tweet-id-or-url...>` ‚Äî remove one or more bookmarks by tweet ID or URL.
- `bird likes [-n count] [--json]` ‚Äî list your liked tweets.
- `bird list-timeline <list-id-or-url> [-n count] [--all] [--max-pages n] [--cursor string] [--json]` ‚Äî get tweets from a list timeline; `--max-pages` implies `--all`.
- `bird following [--user <userId>] [-n count] [--json]` ‚Äî list users that you (or another user) follow.
- `bird followers [--user <userId>] [-n count] [--json]` ‚Äî list users that follow you (or another user).
- `bird whoami` ‚Äî print which Twitter account your cookies belong to.
- `bird check` ‚Äî show which credentials are available and where they were sourced from.

Global options:
- `--auth-token <token>`: set the `auth_token` cookie manually.
- `--ct0 <token>`: set the `ct0` cookie manually.
- `--cookie-source <safari|chrome|firefox>`: choose browser cookie source (repeatable; order matters).
- `--chrome-profile <name>`: Chrome profile for cookie extraction.
- `--firefox-profile <name>`: Firefox profile for cookie extraction.
- `--cookie-timeout <ms>`: cookie extraction timeout for keychain/OS helpers (milliseconds).
- `--timeout <ms>`: abort requests after the given timeout (milliseconds).
- `--quote-depth <n>`: max quoted tweet depth in JSON output (default: 1; 0 disables).
- `--plain`: stable output (no emoji, no color).
- `--no-emoji`: disable emoji output.
- `--no-color`: disable ANSI colors (or set `NO_COLOR=1`).
- `--media <path>`: attach media file (repeatable, up to 4 images or 1 video).
- `--alt <text>`: alt text for the corresponding `--media` (repeatable).

## Authentication (GraphQL)

GraphQL mode uses your existing X/Twitter web session (no password prompt). It sends requests to internal
X endpoints and authenticates via cookies (`auth_token`, `ct0`).

Write operations:
- `tweet`/`reply` primarily use GraphQL (`CreateTweet`).
- If GraphQL returns error `226` (‚Äúautomated request‚Äù), `bird` falls back to the legacy `statuses/update.json` endpoint.

`bird` resolves credentials in this order:

1. CLI flags: `--auth-token`, `--ct0`
2. Environment variables: `AUTH_TOKEN`, `CT0` (fallback: `TWITTER_AUTH_TOKEN`, `TWITTER_CT0`)
3. Browser cookies via `browser-cookie3` (override via `--cookie-source` order)

## Config (JSON5)

Config precedence: CLI flags > env vars > project config > global config.

- Global: `~/.config/bird/config.json5`
- Project: `./.birdrc.json5`

Example `~/.config/bird/config.json5`:

```json5
{
  // Cookie source order for browser extraction (string or array)
  cookieSource: ["firefox", "safari"],
  firefoxProfile: "default-release",
  timeoutMs: 15000,
  quoteDepth: 1,
}
```

## Development

```bash
uv venv
uv sync --dev
uv run pytest
```
